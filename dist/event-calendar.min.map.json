{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/calendar.js","src/js/utils.js","node_modules/object-assign/index.js"],"names":["eventCalendar","_ref","createDOM","createTable","appendToDOM","el","classList","add","prefix","appendChild","table","createEl","className","thead","tbody","innerHTML","createTableHead","createCaptionWithControls","caption","createControls","captionText","prev","next","textContent","addEventListener","goToPreviousMonth","goToNextMonth","previous","_utils","date","state","currentTime","subtractMonth","setState","valueOf","emit","evts","DID_CHANGE_MONTH","month","following","addMonth","newState","WILL_CHANGE_STATE","_objectAssign2","render","setLocale","str","locale","WILL_RENDER","newTbody","createMonth","capitalize","i18n","getMonth","replaceChild","DID_RENDER","tag","options","arguments","length","undefined","node","document","createElement","Object","keys","forEach","key","days","range","map","i","getWeekDay","thTmpl","join","rowTmpl","createTableCell","day","events","filter","event","isSameDay","timestamp","sort","event1","event2","Date","getTime","tdTmpl","createTableRow","cell","createMonthArray","isWithinCalendarRange","date2compare","currentMonth","lastMonth","nextMonth","weekday","getWeekStart","curr","startDate","currentDate","_ref22","push","dayOfMonth","isOtherMonth","addDay","cells","eventTmpl","isFunction","eventTemplate","time","name","link","_ref3","tdTemplate","active","passive","links","on","callback","_events","concat","_toConsumableArray","api","off","cb","data","init","selector","isString","Error","errors","INVALID_SELECTOR","querySelector","SELECTOR_DID_NOT_MATCH","debug","console","timeEnd","now","initialState","INITIALIZED","_ref$locale","userLang","_ref$i18n","_ref$state","lang","index","this","weekdays","months","startOfWeek","en","split","sv","find","array","value","getPredicate","item","RegExp","test","res","some","predicate","mapBy","Array","isArray","reduce","slice","toUpperCase","num","isNumber","arr","fn","isUndefined","zeroPad","d","getSet","hasValue","method","kronos","year","getFullYear","diff","getDay","hours","getHours","minutes","getMinutes","compareDate","every","toObject","val","TypeError","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","module","exports","assign","target","source","from","symbols","to","s","call","getOwnPropertySymbols"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import assign from 'object-assign';\nimport { capitalize, range, isFunction, isString, date } from './utils';\n\nconst evts = {\n  INITIALIZED: 'initialized',\n  WILL_RENDER: 'will-render',\n  DID_RENDER: 'did-render',\n  WILL_CHANGE_STATE: 'will-change-state',\n  DID_CHANGE_MONTH: 'did-change-month'\n};\n\nconst prefix = 'evt-calendar';\nconst errors = {\n  SELECTOR_DID_NOT_MATCH: 'Selector did not match any element',\n  INVALID_SELECTOR: 'Must supply css-selector as string'\n};\n\nconst lang = {\n  en: {\n    months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\n    weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n    startOfWeek: 0\n  },\n  sv: {\n    months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),\n    weekdays: 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),\n    startOfWeek: 1\n  }\n};\n\nfunction eventCalendar({ selector, debug, tdTemplate, eventTemplate, locale = 'en', i18n: userLang = {}, state: initialState = {} }) {\n  let el;\n  let state;\n  let table;\n  let captionText;\n  let tbody;\n  let prev;\n  let next;\n  let api;\n  const _events = {};\n  const i18n = assign({}, lang, userLang, {\n    getWeekDay(i) {\n      const index = i + this.getWeekStart();\n      return this[locale].weekdays[index > 6 ? 0 : index];\n    },\n    getMonth(i) {\n      return this[locale].months[i];\n    },\n    getWeekStart() {\n      return this[locale].startOfWeek;\n    }\n  });\n\n  function createDOM() {\n    createTable();\n    appendToDOM();\n  }\n\n  function appendToDOM() {\n    el.classList.add(prefix + '__container');\n    el.appendChild(table);\n  }\n\n  function createTable() {\n    table = createEl('table', { className: prefix });\n    const thead = createEl('thead');\n    tbody = createEl('tbody');\n\n    thead.innerHTML = createTableHead();\n    table.appendChild(createCaptionWithControls());\n    table.appendChild(thead);\n    table.appendChild(tbody);\n  }\n\n  function createCaptionWithControls() {\n    const caption = createEl('caption');\n    createControls();\n    captionText = createEl('div', { className: prefix + '__caption' });\n\n    caption.appendChild(prev);\n    caption.appendChild(next);\n    caption.appendChild(captionText);\n\n    return caption;\n  }\n\n  function createControls() {\n    prev = createEl('button', { textContent: '<', className: prefix + '__prev-btn' });\n    next = createEl('button', { textContent: '>', className: prefix + '__next-btn' });\n\n    prev.addEventListener('click', goToPreviousMonth);\n    next.addEventListener('click', goToNextMonth);\n  }\n\n  function goToPreviousMonth() {\n    const previous = date(state.currentTime).subtractMonth();\n    setState({\n      currentTime: previous.valueOf()\n    });\n    emit(evts.DID_CHANGE_MONTH, previous.month());\n  }\n\n  function goToNextMonth() {\n    const following = date(state.currentTime).addMonth();\n\n    setState({\n      currentTime: following.valueOf()\n    });\n\n    emit(evts.DID_CHANGE_MONTH, following.month());\n  }\n\n  function setState(newState) {\n    emit(evts.WILL_CHANGE_STATE, newState);\n\n    state = assign({}, state, newState);\n    render();\n  }\n\n  function setLocale(str) {\n    locale = str;\n    render();\n  }\n\n  function render() {\n    emit(evts.WILL_RENDER);\n\n    const newTbody = createEl('tbody', { innerHTML: createMonth() });\n\n    captionText.textContent = capitalize(i18n.getMonth(date(state.currentTime).month()));\n\n    table.replaceChild(newTbody, tbody);\n    tbody = newTbody;\n\n    emit(evts.DID_RENDER);\n  }\n\n  function createEl(tag, options = {}) {\n    const node = document.createElement(tag);\n    Object.keys(options).forEach((key) => {\n      node[key] = options[key];\n    });\n    return node;\n  }\n\n  function createTableHead() {\n    const days = range(7)\n      .map((i) => capitalize(i18n.getWeekDay(i)))\n      .map(thTmpl)\n      .join('');\n\n    return rowTmpl(days);\n  }\n\n  function createTableCell(day) {\n    const events = state.events\n      .filter((event) => {\n        return date(event.date).isSameDay(day.timestamp);\n      })\n      .sort((event1, event2) => {\n        return new Date(event1.date).getTime() - new Date(event2.date).getTime();\n      });\n\n    return tdTmpl({ day, events });\n  }\n\n  function createTableRow(cell, i) {\n    // insert a row before new week\n    if (i % 7) {\n      return cell;\n    }\n\n    return rowTmpl(cell);\n  }\n\n  function createMonth() {\n    return createMonthArray()\n      .map(createTableCell)\n      .map(createTableRow)\n      .join('');\n  }\n\n  function createMonthArray() {\n    const days = [];\n    const curr = date(state.currentTime);\n    const month = curr.month();\n    const startDate = date(curr).date(1).weekday(i18n.getWeekStart());\n    const currentDate = date(startDate);\n    const [lastMonth, nextMonth] = (function getNearbyMonths() {\n      if (month === 0) {\n        return [11, 1];\n      }\n      if (month === 11) {\n        return [10, 0];\n      }\n      return [month - 1, month + 1];\n    })();\n\n    function isWithinCalendarRange(date2compare) {\n      const currentMonth = date2compare.month();\n\n      if (currentMonth === lastMonth || currentMonth === month) {\n        return true;\n      }\n\n      if (currentMonth === nextMonth) {\n        return date2compare.weekday() !== i18n.getWeekStart();\n      }\n    }\n\n    while (isWithinCalendarRange(currentDate)) {\n      days.push({\n        dayOfMonth: currentDate.date(),\n        timestamp: currentDate.valueOf(),\n        isOtherMonth: currentDate.month() !== month\n      });\n      currentDate.addDay();\n    }\n\n    return days;\n  }\n\n  /**\n   * Template functions\n   */\n\n  function rowTmpl(cells) {\n    return `<tr>${cells}`;\n  }\n\n  function thTmpl(day) {\n    return `<th>${day}</th>`;\n  }\n\n  function eventTmpl(event) {\n    if (isFunction(eventTemplate)) {\n      return eventTemplate(event);\n    }\n\n    const textContent = `${date(event.date).time()} ${event.name}`;\n\n    if (event.link) {\n      return (\n        `<a class=\"${prefix}__cell__event\" href=\"${event.link}\">\n          ${textContent}\n        </a>`);\n    }\n\n    return (\n      `<span class=\"${prefix}__cell__event\">\n        ${textContent}\n      </span>`);\n  }\n\n  function tdTmpl({ day, events }) {\n    if (isFunction(tdTemplate)) {\n      return tdTemplate({ day, events });\n    }\n\n    const active = events.length ? prefix + '__cell--active' : '';\n    const passive = day.isOtherMonth ? prefix + '__cell--passive' : '';\n    const links = events.map(eventTmpl).join('');\n\n    return (\n      `<td class='${prefix}__cell ${active} ${passive}'>\n        ${ links }\n        <span class='${prefix}__cell__date'>${day.dayOfMonth}</span>\n      </td>`);\n  }\n\n  /**\n   * Events\n   */\n\n  function on(event, callback) {\n    if (!_events[event]) {\n      _events[event] = [];\n    }\n    _events[event] = [..._events[event], callback];\n\n    return api;\n  }\n\n  function off(event, callback) {\n    _events[event] = _events[event].filter((cb) => {\n      return cb !== callback;\n    });\n\n    return api;\n  }\n\n  function emit(event, data) {\n    if (_events[event]) {\n      _events[event].forEach((cb) => cb(data));\n    }\n  }\n\n  /**\n   * Init\n   */\n\n  function init() {\n    if (!selector || !isString(selector)) {\n      throw Error(errors.INVALID_SELECTOR);\n    }\n\n    el = document.querySelector(selector);\n\n    if (!el) {\n      throw Error(errors.SELECTOR_DID_NOT_MATCH);\n    }\n\n    if (debug) {\n      on(evts.WILL_RENDER, () => { console.time('render'); });\n      on(evts.DID_RENDER, () => { console.timeEnd('render'); });\n    }\n\n    state = assign({}, {\n      currentTime: Date.now(),\n      events: []\n    }, initialState);\n\n    createDOM();\n    render();\n    emit(evts.INITIALIZED);\n  }\n\n  /**\n   * Export Public API\n   */\n\n  init();\n  api = { render, setState, setLocale, on, off };\n  return api;\n}\n\nexport default eventCalendar;\n\n","export function find(array, value, key) {\n  let res = null;\n\n  function getPredicate(item) {\n    if (value instanceof RegExp) {\n      return key ? value.test(item[key]) : value.test(item);\n    }\n\n    if (typeof value === 'function') {\n      return key ? value(item[key]) : value(item);\n    }\n\n    return key ? item[key] === value : item === value;\n  }\n\n  array.some((item) => {\n    const predicate = getPredicate(item);\n    if (predicate) {\n      res = item;\n      return true;\n    }\n  });\n\n  return res;\n}\n\nexport function mapBy(array, keys) {\n  if (Array.isArray(keys)) {\n    return array.map((item) => {\n      return keys.reduce((res, key) => {\n        res[key] = item[key];\n        return res;\n      }, {});\n    });\n  }\n\n  return array.map((item) => item[keys]);\n}\n\nexport function capitalize(str) {\n  if (!isString(str)) {\n    throw Error('Argument must be of type String');\n  }\n  return str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport function range(num) {\n  if (!isNumber(num)) {\n    throw Error('Argument must be of type number');\n  }\n\n  let i = 0;\n  const arr = [];\n  do {\n    arr.push(i);\n  } while (++i < num);\n  return arr;\n}\n\nexport function isFunction(fn) {\n  return typeof fn === 'function';\n}\n\nexport function isString(str) {\n  return typeof str === 'string';\n}\n\nexport function isNumber(num) {\n  return typeof num === 'number';\n}\n\nexport function isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\nfunction zeroPad(num) {\n  return num < 10 ? `0${num}` : `${num}`;\n}\n\nexport function date(d) {\n  let kronos;\n\n  if (typeof d === 'object') {\n    kronos = new Date(d.getTime());\n  } else {\n    kronos = d ? new Date(d) : new Date();\n  }\n\n  function getSet(value, key) {\n    const hasValue = !isUndefined(value);\n    const method = hasValue ? 'set' + key : 'get' + key;\n\n    if (hasValue) {\n      kronos[method](value);\n      return api;\n    }\n\n    return kronos[method]();\n  }\n\n  const api = {\n    valueOf() {\n      return kronos.getTime();\n    },\n\n    getTime() {\n      return kronos.getTime();\n    },\n\n    year() {\n      return kronos.getFullYear();\n    },\n\n    month(value) {\n      return getSet(value, 'Month');\n    },\n\n    date(value) {\n      return getSet(value, 'Date');\n    },\n\n    weekday(value) {\n      if (!isUndefined(value)) {\n        const diff = value - api.weekday();\n\n        api.date(api.date() + diff);\n        return api;\n      }\n\n      return kronos.getDay();\n    },\n\n    time() {\n      const hours = zeroPad(kronos.getHours());\n      const minutes = zeroPad(kronos.getMinutes());\n      return `${hours}:${minutes}`;\n    },\n\n    subtractMonth() {\n      return api.month(kronos.getMonth() - 1);\n    },\n\n    addMonth() {\n      return api.month(kronos.getMonth() + 1);\n    },\n\n    addDay() {\n      return api.date(api.date() + 1);\n    },\n\n    isSameDay(timestamp) {\n      const compareDate = new Date(timestamp);\n\n      return ['getFullYear', 'getMonth', 'getDate'].every((fn) => {\n        return compareDate[fn]() === kronos[fn]();\n      });\n    }\n  };\n\n  return api;\n}\n\nexport default { find, mapBy, capitalize, range, isFunction, isString, isUndefined, date };\n","/* eslint-disable no-unused-vars */\n'use strict';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n"]}